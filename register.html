<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - GTC Ado-Soba Attendance</title>
    <!-- SEO Meta Tags -->
    <meta name="description"
        content="GTC Ado-Soba Attendance System - Admin Dashboard for managing student attendance and generating reports">
    <meta name="keywords"
        content="GTC Ado-Soba, attendance system, student management, education technology">
    <meta name="author" content="GTC Ado-Soba">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="GTC Ado-Soba Attendance">
    <meta property="og:description" content="Admin Dashboard for GTC Ado-Soba Attendance System">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://gtcadosobaschooltracker.vercel.app/">
    <meta property="og:image" content="https://gtcadosobaschooltracker.vercel.app/schoollogo.png">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="GTC Ado-Soba Attendance">
    <meta name="twitter:description" content="Admin Dashboard for GTC Ado-Soba Attendance System">
    <meta name="twitter:image" content="https://gtcadosobaschooltracker.vercel.app/schoollogo.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="shortcut icon" href="schoollogo.png" type="image/x-icon">
    <style>
        :root {
            --primary-color: #00006b;
            --secondary-color: #00006b;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #00006b 0%, #00006b 100%);
            min-height: 100vh;
        }

        .register-container {

            max-width: 500px;
            margin: 120px auto;
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .form-control,
        .form-select {
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            padding: 12px 16px;
            transition: all 0.3s ease;
        }

        .form-control:focus,
        .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .btn-register {
            background: var(--primary-color);
            border: none;
            padding: 12px 30px;
            font-weight: 600;
            border-radius: 8px;
            width: 100%;
            transition: all 0.3s ease;
        }

        .btn-register:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .form-label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .nav-link {
            color: white !important;
            font-weight: 500;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.1) !important;
            backdrop-filter: blur(10px);
        }

        .alert {
            border-radius: 8px;
            border: none;
        }

        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: #6b7280;
        }

        .password-container {
            position: relative;
        }

        .register-icon {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .class-info {
            background: #f8fafc;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary-color);
        }

        .form-row {
            display: flex;
            gap: 1rem;
        }

        .form-col {
            flex: 1;
        }

        @media (max-width: 576px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }

            .container {
                background: rgb(0, 0, 107) !important;
                backdrop-filter: blur(10px);

            }

            .navbar {
                background: rgb(0, 0, 107) !important;
                backdrop-filter: blur(10px);
            }
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">
                <img src="schoollogo.png" alt="" width="100">GTC Ado-Soba Attendance
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="register.html">Student Register</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="admin-register.html">Admin Register</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="login.html">Student Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="admin-login.html">Admin Login</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Registration Form -->
    <div class="container">
        <div class="register-container">
            <div class="text-center mb-4">
                <i class="bi bi-person-plus-fill register-icon"></i>
                <h2 class="mt-3">Student Registration</h2>
                <p class="text-muted">Create your account to get started</p>
            </div>

            <div class="class-info">
                <i class="bi bi-info-circle me-2"></i>
                <strong>Select your section and class:</strong><br>
                <small>First choose your technical section, then select your specific class level.</small>
            </div>

            <div id="alertContainer"></div>

            <form id="registerForm">
                <div class="mb-3">
                    <label for="fullName" class="form-label">
                        <i class="bi bi-person me-1"></i>Full Name
                    </label>
                    <input type="text" class="form-control" id="fullName" required>
                </div>

                <div class="form-row">
                    <div class="form-col">
                        <div class="mb-3">
                            <label for="studentSection" class="form-label">
                                <i class="bi bi-building me-1"></i>Section
                            </label>
                            <select class="form-select" id="studentSection" required>
                                <option value="">Select your section</option>
                                <option value="Section">Motor Vehicle Mechanic</option>
                                <option value="Section">Welding and Fabrication</option>
                                <option value="Section">Electrical Installation and Maintenance Work</option>
                                <option value="Section">Mechanical Craft</option>
                                <option value="Section">Electronics Work</option>
                                <option value="Section">Computer Craft</option>
                                <option value="Section">Blocklaying and Fabrication</option>
                                <option value="Section">Plumbing and Pipefitting</option>
                                <option value="Section">Painting and Decoration</option>
                                <option value="Section">Furniture Making</option>
                                <option value="Section">Garment Making</option>
                                <option value="Section">Catering Craft Practice</option>
                                <option value="Section">Book Keeping</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="mb-3">
                            <label for="studentClass" class="form-label">
                                <i class="bi bi-book me-1"></i>Class
                            </label>
                            <select class="form-select" id="studentClass" required disabled>
                                <option value="">First select a section</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="pin" class="form-label">
                        <i class="bi bi-key me-1"></i>Unique PIN (4 digits)
                    </label>
                    <input type="text" class="form-control" id="pin" maxlength="4" pattern="\d{4}" required>
                    <small class="text-muted">Enter a 4-digit PIN for attendance marking</small>
                </div>

                <div class="mb-3">
                    <label for="password" class="form-label">
                        <i class="bi bi-lock me-1"></i>Password
                    </label>
                    <div class="password-container">
                        <input type="password" class="form-control" id="password" required>
                        <i class="bi bi-eye-slash password-toggle" id="togglePassword"></i>
                    </div>
                    <small class="text-muted">Minimum 6 characters</small>
                </div>

                <div class="mb-4">
                    <label for="confirmPassword" class="form-label">
                        <i class="bi bi-lock-fill me-1"></i>Confirm Password
                    </label>
                    <input type="password" class="form-control" id="confirmPassword" required>
                </div>

                <button type="submit" class="btn btn-register text-white">
                    <i class="bi bi-person-check me-2"></i>Register Account
                </button>

                <div class="text-center mt-3">
                    <p class="mb-0">Already have an account? <a href="login.html" class="text-primary">Login here</a>
                    </p>
                    <p class="mt-2"><a href="admin-register.html" class="text-muted">Register as Admin</a></p>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBxqHcw20bkjV8lZhBxnYpnc71EMmMy4sY",
            authDomain: "my-project-d8b25.firebaseapp.com",
            databaseURL: "https://my-project-d8b25-default-rtdb.firebaseio.com",
            projectId: "my-project-d8b25",
            storageBucket: "my-project-d8b25.firebasestorage.app",
            messagingSenderId: "1091543391506",
            appId: "1:1091543391506:web:9b642fbfb3d3717855e7cb",
            measurementId: "G-5PC522L4W7"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Class options based on section
        const classOptions = {
            "Section": [
                { value: "Computer Tech 1", text: "Computer Tech 1" },
                { value: "Computer Tech 2", text: "Computer Tech 2" },
                { value: "Computer Tech 3", text: "Computer Tech 3" },

                { value: "Mechnical Tech 1", text: "Mechnical Tech 1" },
                { value: "Mechnical Tech 2", text: "Mechnical Tech 2" },
                { value: "Mechnical Tech 3", text: "Mechnical Tech 3" },

                { value: "Motor Vehicle Tech 1", text: "Motor Vehicel Tech 1" },
                { value: "Motor Vehicle Tech 2", text: "Motor Vehicle Tech 2" },
                { value: "Motor Vehicle Tech 3", text: "Motor Vehicle Tech 3" },

                { value: "Welding Tech 1", text: "Welding Tech 1" },
                { value: "Welding Tech 2", text: "Welding Tech 2" },
                { value: "Welding Tech 3", text: "Welding Tech 3" },

                { value: "Electronics Tech 1", text: "Electronics Tech 1" },
                { value: "Electronics Tech 2", text: "Electronics Tech 2" },
                { value: "Electronics Tech 3", text: "Electronics Tech 3" },

                { value: "Electrical Tech 1", text: "Electrical Tech 1" },
                { value: "Electrical Tech 2", text: "Electrical Tech 2" },
                { value: "Electrical Tech 3", text: "Electrical Tech 3" },

                { value: "Painting Tech 1", text: "Painting Tech 1" },
                { value: "Painting Tech 2", text: "Painting Tech 2" },
                { value: "Painting Tech 3", text: "Painting Tech 3" },

                { value: "Blocklaying Tech 1", text: "Blocklaying Tech 1" },
                { value: "Blocklaying Tech 2", text: "Blocklaying Tech 2" },
                { value: "Blocklaying Tech 3", text: "Blocklaying Tech 3" },

                { value: "Furniture Tech 1", text: "Furniture Tech 1" },
                { value: "Furniture Tech 1", text: "Furniture Tech 2" },
                { value: "Furniture Tech 3", text: "Furniture Tech 3" },

                { value: "Plumbing Tech 1", text: "Plumbing Tech 1" },
                { value: "Plumbing Tech 2", text: "Plumbing Tech 2" },
                { value: "Plumbing Tech 3", text: "Plumbing Tech 3" },

                { value: "Garment Tech 1", text: "Garment Tech 1" },
                { value: "Garment Tech 2", text: "Garment Tech 2" },
                { value: "Garment Tech 3", text: "Garment Tech 3" },

                { value: "Catering Tech 1", text: "Catering Tech 1" },
                { value: "Catering Tech 2", text: "Catering Tech 2" },
                { value: "Catering Tech 3", text: "Catering Tech 3" },

                { value: "Computer Tech 1", text: "Book Keeping Tech 1" },
                { value: "Computer Tech 2", text: "Book Keeping Tech 2" },
                { value: "Computer Tech 3", text: "Book Keeping Tech 3" },




            ],
        };

        // Handle section change
        document.getElementById('studentSection').addEventListener('change', function () {
            const selectedSection = this.value;
            const classSelect = document.getElementById('studentClass');

            // Clear current options
            classSelect.innerHTML = '<option value="">Select your class</option>';

            if (selectedSection) {
                // Enable class dropdown
                classSelect.disabled = false;

                // Add class options based on selected section
                classOptions[selectedSection].forEach(option => {
                    const optionElement = document.createElement('option');
                    optionElement.value = option.value;
                    optionElement.textContent = option.text;
                    classSelect.appendChild(optionElement);
                });
            } else {
                // Disable class dropdown if no section selected
                classSelect.disabled = true;
            }
        });

        // Password toggle functionality
        const togglePassword = document.getElementById('togglePassword');
        const passwordInput = document.getElementById('password');

        togglePassword.addEventListener('click', function () {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            this.classList.toggle('bi-eye');
            this.classList.toggle('bi-eye-slash');
        });

        // Form submission
        document.getElementById('registerForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            const fullName = document.getElementById('fullName').value;
            const studentSection = document.getElementById('studentSection').value;
            const studentClass = document.getElementById('studentClass').value;
            const pin = document.getElementById('pin').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            // Validation
            if (!studentSection) {
                showAlert('Please select a section!', 'danger');
                return;
            }

            if (!studentClass) {
                showAlert('Please select a class!', 'danger');
                return;
            }

            if (password !== confirmPassword) {
                showAlert('Passwords do not match!', 'danger');
                return;
            }

            if (password.length < 6) {
                showAlert('Password must be at least 6 characters long!', 'danger');
                return;
            }

            if (pin.length !== 4 || !/^\d{4}$/.test(pin)) {
                showAlert('PIN must be exactly 4 digits!', 'danger');
                return;
            }

            // Check if PIN already exists
            const pinSnapshot = await database.ref('students').orderByChild('pin').equalTo(pin).once('value');
            if (pinSnapshot.exists()) {
                showAlert('This PIN is already in use. Please choose a different one!', 'danger');
                return;
            }

            // Combine section and class for the class field
            const fullClassName = studentClass;

            // Save student data
            const studentData = {
                fullName: fullName,
                section: studentSection,
                class: fullClassName,
                pin: pin,
                password: btoa(password), // Simple encoding (in production, use proper hashing)
                registeredAt: new Date().toISOString(),
                profilePicture: null // Initialize with no profile picture
            };

            // Disable the submit button to prevent multiple submissions
            const submitButton = document.querySelector('.btn-register');
            submitButton.disabled = true;
            submitButton.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Creating Account...';

            database.ref('students').push(studentData)
                .then(() => {
                    showAlert('Registration successful! You can now login.', 'success');
                    setTimeout(() => {
                        window.location.href = 'login.html';
                    }, 2000);
                })
                .catch(error => {
                    // Re-enable the button if there's an error
                    submitButton.disabled = false;
                    submitButton.innerHTML = '<i class="bi bi-person-check me-2"></i>Register Account';

                    showAlert('Registration failed. Please try again.', 'danger');
                    console.error(error);
                });
        });

        function showAlert(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            alertContainer.innerHTML = `
                <div class="alert alert-${type} alert-dismissible fade show" role="alert">
                    ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            `;
        }
    </script>
</body>

</html>
